%DEMO轨迹点，直接以轨迹点作为控制点，生成平滑的B样条轨迹
p=[ 
    0.04356986841099,0.059489604008614;%复制一遍
    0.04356986841099,0.059489604008614;%复制两遍
    0.04356986841099,0.059489604008614;
    1.03111022866504,0.026221174778085;
    2.09233796421032,0.060284308938208;
    3.04302073913296,0.071121578043368;
    3.71848163201241,0.122174673401724;
    4.01848163201241,0.222174673401724;
    5.09048809686799,0.051741765085581;
    5.59048809686799,0.011741765085581;
    6.09797483783561,0.029667587321833;
    7.04388699731261,0.031877830192588;
    8.01111192234406,-0.042416675971381;
    8.51111192234406,0.102416675971381;
    9.02580646959121,0.050785828466112;
    10.0408719846113,0.00855157970900;
    10.0408719846113,0.00855157970900;%复制一遍
    10.0408719846113,0.00855157970900;%复制两遍
    ];

%代码其他部分不用动
%系数矩阵
M=[ -1,3,-3,1;
    3,-6,3,0;
    -3,0,3,0;
    1,4,1,0;]/6;

%循环生成
for i=1:size(p,1)-3
    for t=0:0.2:0.8 %密度可以根据需求调整；区间为左闭右开。
        res=[res;[t^3,t^2,t,1]*M*p(i:i+3,:)];
    end
end
res=[res;[1,1,1,1]*M*p(size(p,1)-3:size(p,1),:)];%补上“左闭右开”导致缺少的最后一个点。